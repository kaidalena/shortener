# Укорачиватель ссылок

## Описание

Сервис, который предоставляет API по созданию сокращённых ссылок следующего формата:

- На один оригинальный URL ссылается только одна сокращенная ссылка.
- Сокращенная ссылка имеет длину в 10 символов
- Сокращенная ссылка состоит из символов латинского алфавита в нижнем и верхнем регистре, цифр и символа _ (подчеркивание)
- Результат создания ссылки: исходный домен ссылки + сокращенная ссылка

Сервис написан на Go и принимает следующие запросы по gRPC:

1. Метод Create, который сохраняет оригинальный URL в базе и возвращать сокращённый
2. Метод Get, который принимать сокращённый URL и возвращать оригинальный URL

В проекте был использован следующий стек технологий:

* Go
* gRPC
* PostgreSQL
* Docker
* Unit-test

## Запуск

### Docker

Для запуска в Docker достаточно перейти в папку проекта и запустить файл docker-compose :

```
cd /shortener
docker-compose up --build
```

В файле **Dockerfile** описан запуск этого проекта, а в файле **docker-compose.yml** описан запуск 4 docker-образов (базы данных, миграций, сервера и клиента).

### Компиляция .exe

Сначала необходимо установить все необходимые пакеты и зависимости (описано в Dockerfile):

```
go get -u github.com/golang/protobuf@v1.5.0
go get -u google.golang.org/grpc@v1.40.0
go get -u google.golang.org/protobuf/cmd/protoc-gen-go@latest
go get -u google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
go get -u github.com/lib/pq@v1.10.2
go mod tidy
```

#### Сервер

Чтобы скомпилировать и запустить **сервер** необходимо перейти в папку проекта и выполнить следующую команду:

```
go run mainServer.go
```
По умолчанию сервер обращается к БД по localhost. Чтобы изменить адрес к БД необходимо указать в переменной окружения DB_HOST необходимый адрес.

#### Клиент

Чтобы скомпилировать и запустить **клиента** необходимо перейти в папку проекта и выполнить следующую команду:

```
go run mainServer.go <url>
```
где url - входной URL адрес для сокращения.

По умолчанию клиент обращается к серверу по localhost. Чтобы изменить адрес к серверу необходимо указать в переменной окружения SERVER_HOST необходимый адрес.